{"version":3,"file":"background.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN,0BAA0B,mCAAmC;AAC7D;;AAEA;AACA;AACA,YAAY,sDAAsD;AAClE;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI;AACJ;AACA;AACA","sources":["webpack://summary-tts/./src/background.js"],"sourcesContent":["chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  switch (request.type) {\n    case 'GET_SUMMARY':\n      summarizeText(request.text, sendResponse);\n      return true;\n    case 'GET_SUMMARY_POPUP':\n      summarizeText(request.text);\n      return true;\n\n    default:\n      break;\n  }\n});\n\nasync function summarizeText(text, response = null) {\n  const body = {\n    model: 'gpt-3.5-turbo',\n    messages: [\n      {\n        role: 'user',\n        content: 'summarize\\n ' + text,\n      },\n    ],\n  };\n\n  const options = {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n      Authorization:\n        'Bearer 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',\n    },\n    body: JSON.stringify(body),\n  };\n\n  try {\n    let res = await fetch(\n      'https://api.openai.com/v1/chat/completions',\n      options\n    );\n    let data = await res.json();\n\n    if (response != undefined) {\n      response;\n      response(data.choices[0].message.content);\n    } else if (!response) {\n      chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n        console.log(tabs);\n\n        chrome.tabs.sendMessage(\n          tabs[0].id,\n          { type: 'SPEAK', text: data.choices[0].message.content },\n          (response) => {\n            console.log('Response from content script:', response);\n          }\n        );\n      });\n    }\n  } catch (err) {\n    console.error('cannot summarize text');\n  }\n}\n"],"names":[],"sourceRoot":""}